const fs = require('fs');
const path = require('path');

const wellKnownPathsPath = path.join(process.env.LOCALAPPDATA, 'citizenfx/sdk-storage/well-known-paths.json');
const wellKnownPaths = JSON.parse(fs.readFileSync(wellKnownPathsPath).toString());

function init() {
  return {
    create(info) {
      info.project.addMissingFileRoot(wellKnownPaths['ts_types_path']);

      return info.languageService;
    },
  };
}

module.exports = init;
